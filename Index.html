<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#111827" />
  <title>Anim√≥metro</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#F7F6F3;
      --ink:#111827;
      --muted:#6B7280;
      --primary:#2563EB;
      --ring:#111827;
      --ok:#10B981;
      --err:#EF4444;
      --card:#FFFFFF;
      --shadow:0 6px 30px rgba(17,24,39,.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--ink);
      background:linear-gradient(180deg,#F8F7F4 0%,#F1F0EC 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:24px;
    }
    .app{
      width:100%;
      max-width:880px;
      background:var(--card);
      border-radius:20px;
      padding:28px;
      box-shadow:var(--shadow);
    }
    h1{
      font-size:clamp(1.25rem,2.2vw,1.8rem);
      text-align:center;
      margin:4px 0 22px;
      letter-spacing:.2px;
    }
    .moods{
      display:grid;
      grid-template-columns: repeat(5,1fr);
      gap:16px;
    }
    @media (max-width:780px){ .moods{grid-template-columns: repeat(3,1fr)} }
    @media (max-width:520px){ .moods{grid-template-columns: repeat(2,1fr)} }
    .mood{
      background:transparent;
      border:none;
      cursor:pointer;
      padding:6px 4px 10px;
      text-align:center;
      transition:transform .15s ease;
      position:relative;
    }
    .mood:hover{ transform:translateY(-2px) }
    .pill{
      width:110px; height:110px;
      border-radius:999px;
      margin:0 auto 10px;
      display:grid; place-items:center;
      box-shadow:inset 0 0 0 1px rgba(17,24,39,.08), 0 8px 18px rgba(0,0,0,.06);
      transition: box-shadow .18s ease, transform .18s ease;
      font-weight:700; font-size:18px;
      user-select:none;
    }
    .mood[data-color="motiv"] .pill{ background:radial-gradient(circle,#FFE585,#FFD54F) }
    .mood[data-color="tranq"] .pill{ background:radial-gradient(circle,#CFF9EC,#A5E4D6) }
    .mood[data-color="neut"]  .pill{ background:radial-gradient(circle,#F3F4F6,#E5E7EB) }
    .mood[data-color="cans"]  .pill{ background:radial-gradient(circle,#FFE0DC,#FCD5CE) }
    .mood[data-color="estr"]  .pill{ background:radial-gradient(circle,#FECACA,#FDA4AF) }
    .label{ font-size:.95rem; font-weight:600 }
    .mood.selected .pill{
      box-shadow:0 0 0 4px var(--ring), 0 10px 24px rgba(0,0,0,.12);
      transform:scale(1.04);
    }
    .check{
      position:absolute; right:8px; top:8px;
      width:22px; height:22px; border-radius:999px;
      background:var(--ok); color:white;
      display:none; align-items:center; justify-content:center;
      font-size:14px; font-weight:700;
      box-shadow:0 4px 10px rgba(16,185,129,.35);
    }
    .mood.selected .check{ display:flex }
    .row{ display:grid; gap:14px; max-width:680px; margin:22px auto 0; }
    .input{
      width:100%; padding:14px;
      border-radius:12px; border:1px solid #E5E7EB;
      background:#FAFAFA; font-size:16px;
    }
    .hint{font-size:.9rem; color:var(--muted); margin-top:8px; text-align:center}
    .actions{ margin-top:12px; display:flex; justify-content:center; }
    .btn{
      border:none; cursor:pointer;
      border-radius:12px; padding:12px 18px;
      font-weight:700; color:white; background:var(--primary);
      box-shadow: 0 8px 18px rgba(37,99,235,.25);
      transition: transform .15s ease, box-shadow .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow:0 12px 24px rgba(37,99,235,.3) }
    .status{ text-align:center; font-size:.98rem; min-height:24px; margin-top:6px }
    .ok{ color:var(--ok) }
    .err{ color:var(--err) }
    footer{ margin-top:18px; text-align:center; color:var(--muted); font-size:.85rem; }
  </style>
</head>
<body>
  <main class="app">
    <h1>¬øC√≥mo te sientes al iniciar tu jornada hoy?</h1>

    <section class="moods" aria-label="Selecciona tu estado de √°nimo">
      <button class="mood" type="button" data-estado="Motivado" data-color="motiv" aria-label="Motivado">
        <div class="check">‚úì</div>
        <div class="pill">üôÇ</div>
        <div class="label">Motivado</div>
      </button>
      <button class="mood" type="button" data-estado="Tranquilo" data-color="tranq" aria-label="Tranquilo">
        <div class="check">‚úì</div>
        <div class="pill">üòå</div>
        <div class="label">Tranquilo</div>
      </button>
      <button class="mood" type="button" data-estado="Neutral" data-color="neut" aria-label="Neutral">
        <div class="check">‚úì</div>
        <div class="pill">üòê</div>
        <div class="label">Neutral</div>
      </button>
      <button class="mood" type="button" data-estado="Cansado" data-color="cans" aria-label="Cansado">
        <div class="check">‚úì</div>
        <div class="pill">ü•±</div>
        <div class="label">Cansado</div>
      </button>
      <button class="mood" type="button" data-estado="Estresado" data-color="estr" aria-label="Estresado">
        <div class="check">‚úì</div>
        <div class="pill">üò£</div>
        <div class="label">Estresado</div>
      </button>
    </section>

    <p class="hint">Toca una carita. Luego escribe tu correo y comentario (opcional) y presiona Enviar.</p>

    <section class="row" aria-label="Datos del registro">
      <input class="input" id="usuario" type="email" placeholder="Tu correo (ej. nombre@correo.com)" autocomplete="email" required />
      <input class="input" id="comentario" type="text" placeholder="Comentario opcional (m√°x. 140 caracteres)" maxlength="140" />
      <div class="actions">
        <button class="btn" id="enviarBtn" type="button">Enviar</button>
      </div>
      <div id="status" class="status" role="status" aria-live="polite"></div>
    </section>

    <footer>Anim√≥metro ¬∑ MVP Web</footer>
  </main>

  <script>
    // Manejo de selecci√≥n
    let estado = "";
    const moodButtons = document.querySelectorAll('.mood');
    const statusEl = document.getElementById('status');
    const btnEnviar = document.getElementById('enviarBtn');

    moodButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        moodButtons.forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        estado = btn.dataset.estado;
        statusEl.textContent = `Seleccionaste: ${estado}`;
        statusEl.className = 'status';
      });
    });

    // Env√≠o a Google Apps Script (cuando lo tengamos)
    async function enviar(){
      const usuario = document.getElementById('usuario').value.trim();
      const comentario = document.getElementById('comentario').value.trim();

      if(!estado){ statusEl.textContent='‚ö†Ô∏è Selecciona un estado de √°nimo.'; statusEl.className='status err'; return; }
      if(!usuario){ statusEl.textContent='‚ö†Ô∏è Escribe tu correo.'; statusEl.className='status err'; return; }

      const WEBAPP_URL = "AQUI_VA_TU_URL_WEBAPP"; // <- reemplazar luego

      try{
        btnEnviar.disabled = true;
        statusEl.textContent = 'Enviando‚Ä¶'; statusEl.className='status';

        const resp = await fetch(WEBAPP_URL, {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ usuario, estado, comentario })
        });
        const data = await resp.json().catch(()=>({result:'error'}));

        if(data.result==='success'){
          statusEl.textContent='‚úÖ Registro enviado con √©xito. ¬°Gracias!';
          statusEl.className='status ok';
          document.getElementById('comentario').value='';
          moodButtons.forEach(b => b.classList.remove('selected'));
          estado="";
        } else {
          statusEl.textContent='‚ùå Error al enviar.'; statusEl.className='status err';
        }
      }catch(e){
        statusEl.textContent='‚ùå Error de conexi√≥n.'; statusEl.className='status err';
      }finally{
        btnEnviar.disabled = false;
      }
    }

    btnEnviar.addEventListener('click', enviar);
  </script>
</body>
</html>
